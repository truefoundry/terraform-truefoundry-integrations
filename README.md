# terraform-truefoundry-integrations

<!-- BEGIN_TF_DOCS -->

## Requirements

| Name                                                                     | Version |
| ------------------------------------------------------------------------ | ------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | ~> 1.4  |
| <a name="requirement_local"></a> [local](#requirement_local)             | ~> 2.5  |
| <a name="requirement_null"></a> [null](#requirement_null)                | ~> 3.0  |

## Providers

| Name                                                   | Version |
| ------------------------------------------------------ | ------- |
| <a name="provider_local"></a> [local](#provider_local) | ~> 2.5  |
| <a name="provider_null"></a> [null](#provider_null)    | ~> 3.0  |

## Modules

No modules.

## Resources

| Name                                                                                                                  | Type        |
| --------------------------------------------------------------------------------------------------------------------- | ----------- |
| [null_resource.create_cluster](https://registry.terraform.io/providers/hashicorp/null/latest/docs/resources/resource) | resource    |
| [local_file.cluster_output](https://registry.terraform.io/providers/hashicorp/local/latest/docs/data-sources/file)    | data source |

## Inputs

| Name                                                                                                                                                                  | Description                                                                                                                                            | Type     | Default                                        | Required |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ | -------- | ---------------------------------------------- | :------: |
| <a name="input_always_update"></a> [always_update](#input_always_update)                                                                                              | Forces cluster configuration updates on every terraform apply, even without changes. Use with caution as it may cause unnecessary updates.             | `bool`   | `false`                                        |    no    |
| <a name="input_aws_account_id"></a> [aws_account_id](#input_aws_account_id)                                                                                           | AWS Account ID where the EKS cluster will be created (e.g., '123456789012')                                                                            | `string` | `null`                                         |    no    |
| <a name="input_aws_cluster_integration_enabled"></a> [aws_cluster_integration_enabled](#input_aws_cluster_integration_enabled)                                        | Enable direct integration with AWS EKS cluster services                                                                                                | `bool`   | `true`                                         |    no    |
| <a name="input_aws_ecr_enabled"></a> [aws_ecr_enabled](#input_aws_ecr_enabled)                                                                                        | Enable AWS Elastic Container Registry (ECR) integration for container image storage                                                                    | `bool`   | `true`                                         |    no    |
| <a name="input_aws_parameter_store_enabled"></a> [aws_parameter_store_enabled](#input_aws_parameter_store_enabled)                                                    | Enable AWS Systems Manager Parameter Store integration for secret management                                                                           | `bool`   | `true`                                         |    no    |
| <a name="input_aws_platform_features_role_arn"></a> [aws_platform_features_role_arn](#input_aws_platform_features_role_arn)                                           | AWS IAM Role ARN for role-based authentication (e.g., 'arn:aws:iam::123456789012:role/TrueFoundryRole')                                                | `string` | `null`                                         |    no    |
| <a name="input_aws_platform_features_user_access_key_id"></a> [aws_platform_features_user_access_key_id](#input_aws_platform_features_user_access_key_id)             | AWS IAM Access Key ID for user-based authentication. Required if aws_platform_features_user_enabled is true.                                           | `string` | `null`                                         |    no    |
| <a name="input_aws_platform_features_user_enabled"></a> [aws_platform_features_user_enabled](#input_aws_platform_features_user_enabled)                               | Enable AWS IAM user-based authentication. If true, requires aws_platform_features_user_access_key_id and aws_platform_features_user_secret_access_key. | `bool`   | `false`                                        |    no    |
| <a name="input_aws_platform_features_user_secret_access_key"></a> [aws_platform_features_user_secret_access_key](#input_aws_platform_features_user_secret_access_key) | AWS IAM Secret Access Key for user-based authentication. Required if aws_platform_features_user_enabled is true.                                       | `string` | `null`                                         |    no    |
| <a name="input_aws_region"></a> [aws_region](#input_aws_region)                                                                                                       | AWS Region where resources will be created (e.g., 'us-west-2')                                                                                         | `string` | `null`                                         |    no    |
| <a name="input_aws_s3_bucket_name"></a> [aws_s3_bucket_name](#input_aws_s3_bucket_name)                                                                               | Name of the S3 bucket to use for cluster storage. Required if aws_s3_enabled is true.                                                                  | `string` | `null`                                         |    no    |
| <a name="input_aws_s3_enabled"></a> [aws_s3_enabled](#input_aws_s3_enabled)                                                                                           | Enable AWS S3 integration for cluster storage capabilities                                                                                             | `bool`   | `true`                                         |    no    |
| <a name="input_aws_secrets_manager_enabled"></a> [aws_secrets_manager_enabled](#input_aws_secrets_manager_enabled)                                                    | Enable AWS Secrets Manager integration for enhanced secrets management capabilities                                                                    | `bool`   | `false`                                        |    no    |
| <a name="input_azure_acr_admin_password"></a> [azure_acr_admin_password](#input_azure_acr_admin_password)                                                             | Admin password for Azure Container Registry. Required if azure_acr_enabled is true.                                                                    | `string` | `null`                                         |    no    |
| <a name="input_azure_acr_admin_username"></a> [azure_acr_admin_username](#input_azure_acr_admin_username)                                                             | Admin username for Azure Container Registry. Required if azure_acr_enabled is true.                                                                    | `string` | `null`                                         |    no    |
| <a name="input_azure_acr_enabled"></a> [azure_acr_enabled](#input_azure_acr_enabled)                                                                                  | Enable Azure Container Registry (ACR) integration for container image storage                                                                          | `bool`   | `true`                                         |    no    |
| <a name="input_azure_acr_login_server"></a> [azure_acr_login_server](#input_azure_acr_login_server)                                                                   | Azure Container Registry login server URL (e.g., 'myregistry.azurecr.io')                                                                              | `string` | `null`                                         |    no    |
| <a name="input_azure_blob_storage_connection_string"></a> [azure_blob_storage_connection_string](#input_azure_blob_storage_connection_string)                         | Connection string for Azure Storage Account. Required if azure_blob_storage_enabled is true.                                                           | `string` | `null`                                         |    no    |
| <a name="input_azure_blob_storage_enabled"></a> [azure_blob_storage_enabled](#input_azure_blob_storage_enabled)                                                       | Enable Azure Blob Storage integration for cluster storage capabilities                                                                                 | `bool`   | `true`                                         |    no    |
| <a name="input_azure_blob_storage_root_url"></a> [azure_blob_storage_root_url](#input_azure_blob_storage_root_url)                                                    | Root URL for Azure Storage Account (e.g., 'https://mystorageaccount.blob.core.windows.net')                                                            | `string` | `null`                                         |    no    |
| <a name="input_azure_client_id"></a> [azure_client_id](#input_azure_client_id)                                                                                        | Azure Service Principal Client ID for authentication                                                                                                   | `string` | `null`                                         |    no    |
| <a name="input_azure_client_secret"></a> [azure_client_secret](#input_azure_client_secret)                                                                            | Azure Service Principal Client Secret for authentication                                                                                               | `string` | `null`                                         |    no    |
| <a name="input_azure_cluster_integration_enabled"></a> [azure_cluster_integration_enabled](#input_azure_cluster_integration_enabled)                                  | Enable direct integration with Azure AKS cluster services                                                                                              | `bool`   | `true`                                         |    no    |
| <a name="input_azure_resource_group_name"></a> [azure_resource_group_name](#input_azure_resource_group_name)                                                          | Name of the Azure Resource Group where the AKS cluster will be created                                                                                 | `string` | `null`                                         |    no    |
| <a name="input_azure_subscription_id"></a> [azure_subscription_id](#input_azure_subscription_id)                                                                      | Azure Subscription ID where the AKS cluster will be created (e.g., '12345678-1234-1234-1234-123456789012')                                             | `string` | `null`                                         |    no    |
| <a name="input_azure_tenant_id"></a> [azure_tenant_id](#input_azure_tenant_id)                                                                                        | Azure Tenant ID associated with the subscription                                                                                                       | `string` | `null`                                         |    no    |
| <a name="input_cluster_name"></a> [cluster_name](#input_cluster_name)                                                                                                 | Name of the Kubernetes cluster to create or manage. Must be unique within your organization.                                                           | `string` | n/a                                            |   yes    |
| <a name="input_cluster_type"></a> [cluster_type](#input_cluster_type)                                                                                                 | Type of cluster to create (aws-eks, azure-aks, or gcp-gke-standard)                                                                                    | `string` | n/a                                            |   yes    |
| <a name="input_control_plane_url"></a> [control_plane_url](#input_control_plane_url)                                                                                  | URL of the TrueFoundry control plane (e.g., 'https://app.truefoundry.com')                                                                             | `string` | n/a                                            |   yes    |
| <a name="input_gcp_artifact_registry_url"></a> [gcp_artifact_registry_url](#input_gcp_artifact_registry_url)                                                          | URL for GCP Artifact Registry (e.g., 'LOCATION-docker.pkg.dev/PROJECT_ID/REPOSITORY')                                                                  | `string` | `null`                                         |    no    |
| <a name="input_gcp_project_id"></a> [gcp_project_id](#input_gcp_project_id)                                                                                           | GCP Project ID where the GKE cluster will be created                                                                                                   | `string` | `null`                                         |    no    |
| <a name="input_gcp_sa_auth_provider_cert_url"></a> [gcp_sa_auth_provider_cert_url](#input_gcp_sa_auth_provider_cert_url)                                              | GCP OAuth provider certificate URL                                                                                                                     | `string` | `"https://www.googleapis.com/oauth2/v1/certs"` |    no    |
| <a name="input_gcp_sa_auth_uri"></a> [gcp_sa_auth_uri](#input_gcp_sa_auth_uri)                                                                                        | GCP OAuth authentication URI                                                                                                                           | `string` | `"https://accounts.google.com/o/oauth2/auth"`  |    no    |
| <a name="input_gcp_sa_client_cert_url"></a> [gcp_sa_client_cert_url](#input_gcp_sa_client_cert_url)                                                                   | GCP Service Account client certificate URL                                                                                                             | `string` | `null`                                         |    no    |
| <a name="input_gcp_sa_client_email"></a> [gcp_sa_client_email](#input_gcp_sa_client_email)                                                                            | GCP Service Account email address (e.g., 'service-account@project-id.iam.gsa.com')                                                                     | `string` | `null`                                         |    no    |
| <a name="input_gcp_sa_client_id"></a> [gcp_sa_client_id](#input_gcp_sa_client_id)                                                                                     | GCP Service Account client ID for authentication                                                                                                       | `string` | `null`                                         |    no    |
| <a name="input_gcp_sa_key_type"></a> [gcp_sa_key_type](#input_gcp_sa_key_type)                                                                                        | GCP Service Account key type (typically 'service_account')                                                                                             | `string` | `null`                                         |    no    |
| <a name="input_gcp_sa_private_key"></a> [gcp_sa_private_key](#input_gcp_sa_private_key)                                                                               | GCP Service Account private key in PEM format                                                                                                          | `string` | `null`                                         |    no    |
| <a name="input_gcp_sa_project_id"></a> [gcp_sa_project_id](#input_gcp_sa_project_id)                                                                                  | GCP Project ID associated with the Service Account                                                                                                     | `string` | `null`                                         |    no    |
| <a name="input_gcp_sa_token_uri"></a> [gcp_sa_token_uri](#input_gcp_sa_token_uri)                                                                                     | GCP OAuth token URI                                                                                                                                    | `string` | `"https://oauth2.googleapis.com/token"`        |    no    |
| <a name="input_gcp_sa_universe_domain"></a> [gcp_sa_universe_domain](#input_gcp_sa_universe_domain)                                                                   | GCP Service Account universe domain (typically 'googleapis.com')                                                                                       | `string` | `"googleapis.com"`                             |    no    |
| <a name="input_gcp_storage_bucket_url"></a> [gcp_storage_bucket_url](#input_gcp_storage_bucket_url)                                                                   | URL for GCP Storage bucket (e.g., 'gs://bucket-name')                                                                                                  | `string` | `null`                                         |    no    |
| <a name="input_tfy_api_key"></a> [tfy_api_key](#input_tfy_api_key)                                                                                                    | TrueFoundry API key for authentication. Can be obtained from the TrueFoundry console.                                                                  | `string` | n/a                                            |   yes    |

## Outputs

| Name                                                                       | Description                   |
| -------------------------------------------------------------------------- | ----------------------------- |
| <a name="output_cluster_id"></a> [cluster_id](#output_cluster_id)          | The ID of the created cluster |
| <a name="output_cluster_token"></a> [cluster_token](#output_cluster_token) | The token for the cluster     |
| <a name="output_tenant_name"></a> [tenant_name](#output_tenant_name)       | The name of the tenant        |

<!-- END_TF_DOCS -->
